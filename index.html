<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inner Circle - Exclusive Membership</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <style>
        /* --- CORE THEME STYLES --- */
        body {
            background-color: #121212;
            color: #E0E0E0;
            font-family: 'Inter', sans-serif;
        }

        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #1E1E1E; }
        ::-webkit-scrollbar-thumb {
            background-color: #CFB53B;
            border-radius: 20px;
            border: 2px solid #1E1E1E;
        }
        ::-webkit-scrollbar-thumb:hover { background-color: #E0C95C; }
        html {
            scrollbar-width: thin;
            scrollbar-color: #CFB53B #1E1E1E;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .hero-bg {
            background-color: #1A1A1A;
            background-image:
                radial-gradient(circle at 10% 10%, rgba(207, 181, 59, 0.05) 0%, transparent 30%),
                radial-gradient(circle at 80% 90%, rgba(207, 181, 59, 0.05) 0%, transparent 30%);
        }
        .gold-text { color: #CFB53B; }
        .gold-bg { background-color: #CFB53B; }
        .gold-border { border-color: #CFB53B; }
        
        .card {
            background-color: #1E1E1E;
            border: 1px solid #333;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: #CFB53B;
        }

        .accordion-item .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .accordion-item.open .accordion-button svg { transform: rotate(180deg); }
        
        .btn-gold { transition: all 0.3s ease; }
        .btn-gold:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(207, 181, 59, 0.2);
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* --- FORM STYLES --- */
        .form-input, .otp-input, .calc-input {
            color: #E0E0E0;
            background-color: #2a2a2a;
            border: 1px solid #444;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease-in-out;
            border-radius: 0.5rem;
        }
        .form-input::placeholder, .calc-input::placeholder { color: #777; }
        .form-input:focus, .otp-input:focus, .calc-input:focus {
            border-color: #CFB53B;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 0 3px rgba(207, 181, 59, 0.2);
            outline: none;
        }
        .otp-input { text-align: center; }
        
        .form-step { display: none; transition: opacity 0.4s ease-in-out; opacity: 0; }
        .form-step.active { display: block; opacity: 1; }
        
        #toast {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            z-index: 9999;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        #toast.show { top: 200px; }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        .shake {
            animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        /* MODAL AND POPUP STYLES */
        .modal-overlay {
            position: fixed; inset: 0;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.open { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: #1A1A1A;
            border: 2px solid #CFB53B;
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 560px;
            text-align: center;
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.3s ease;
            position: relative;
        }
        .modal-overlay.open .modal-content { transform: scale(1); }

        /* VIDEO PLACEHOLDER */
        .video-placeholder {
            cursor: pointer;
            position: relative;
            overflow: hidden;
            background: #000 url('https://placehold.co/1280x720/000000/FFFFFF?text=Play+Video') center center/cover;
        }
        .video-placeholder .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background-color: rgba(207, 181, 59, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .video-placeholder:hover .play-button {
            background-color: #CFB53B;
            transform: translate(-50%, -50%) scale(1.1);
        }

        /* CALCULATOR STYLES */
        .calc-btn-group button { transition: all 0.2s ease-in-out; }
        .calc-btn-group button.active {
            background-color: #CFB53B;
            color: #121212;
            font-weight: bold;
        }
        .tab-btn.active {
            border-color: #CFB53B;
            background-color: #2a2a2a;
        }

        /* D3 Chart Styles */
        .chart-container .axis .domain {
            stroke: #444;
        }
        .chart-container .axis .tick line {
            stroke: #444;
        }
        .chart-container .axis .tick text {
            fill: #888;
            font-size: 12px;
        }
        .chart-container .grid line {
            stroke: #2a2a2a;
            stroke-opacity: 0.7;
            shape-rendering: crispEdges;
        }
        .chart-tooltip {
            position: absolute;
            text-align: center;
            padding: 8px;
            font-size: 12px;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .hover-line {
            stroke: #CFB53B;
            stroke-width: 1px;
            stroke-dasharray: 3,3;
        }
        .hover-circle {
            fill: #CFB53B;
        }


         /* Gift Icon Animation */
         .gift-icon-container {
            position: relative;
            width: 80px;
            height: 80px;
            cursor: pointer;
            z-index: 1;
        }
        .gift-icon-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(207, 181, 59, 0.7) 0%, rgba(207, 181, 59, 0) 70%);
            animation: treasure-shine 3.5s infinite cubic-bezier(0.25, 1, 0.5, 1);
            z-index: -1;
        }
        
        @keyframes treasure-shine {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            40% { transform: translate(-50%, -50%) scale(1.4); opacity: 0.7; }
            100% { transform: translate(-50%, -50%) scale(1.6); opacity: 0; }
        }

        /* Journey Line Animation */
        @keyframes draw {
            to { stroke-dashoffset: 0; }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 15px rgba(207, 181, 59, 0.4); }
            50% { box-shadow: 0 0 35px rgba(207, 181, 59, 0.9), 0 0 15px rgba(207, 181, 59, 0.6) inset; }
        }

        #journey-line-1, #journey-line-2, #journey-line-3 {
            stroke-dashoffset: 1;
            stroke-dasharray: 1;
        }

        #journey-section.is-visible #journey-line-1 {
            animation: draw 1s 0.2s ease-out forwards;
        }
        #journey-section.is-visible #journey-line-2 {
            animation: draw 1s 1.2s ease-out forwards;
        }
        #journey-section.is-visible #journey-line-3 {
            animation: draw 1s 2.2s ease-out forwards;
        }

        #journey-section.is-visible .journey-step .w-16 {
            animation-name: none;
        }
        #journey-section.is-visible .journey-step:nth-child(1) .w-16 {
            animation: glow 1.5s ease-in-out forwards;
        }
        #journey-section.is-visible .journey-step:nth-child(2) .w-16 {
            animation: glow 1.5s 1s ease-in-out forwards;
        }
        #journey-section.is-visible .journey-step:nth-child(3) .w-16 {
            animation: glow 1.5s 2s ease-in-out forwards;
        }
        #journey-section.is-visible .journey-step:nth-child(4) .w-16 {
            animation: glow 1.5s 3s ease-in-out forwards;
        }
    </style>
</head>
<body class="antialiased">
    
    <div id="toast" class="py-3 px-6 rounded-lg shadow-xl"><span id="toast-message"></span></div>

    <!-- Exit Intent Popup -->
    <div id="exit-intent-modal" class="modal-overlay">
        <div class="modal-content">
             <h3 class="font-serif text-3xl gold-text mb-4">⚠️ Before You Go...</h3>
             <p class="text-gray-300 mb-6 text-lg">You're leaving behind:</p>
             <ul class="text-left space-y-3 mb-8">
                <li class="flex items-center"><span class="text-green-400 mr-3">✔</span> ₹1.2L annual company matching</li>
                <li class="flex items-center"><span class="text-green-400 mr-3">✔</span> Free RM worth ₹50K/year</li>
                <li class="flex items-center"><span class="text-green-400 mr-3">✔</span> Exclusive masterclass access</li>
             </ul>
             <p class="text-gray-400 text-sm mb-6">It takes 30 seconds to enroll.</p>
             <div class="flex flex-col sm:flex-row gap-4">
                <button id="claim-benefits-btn" class="gold-bg text-black font-bold w-full py-3 px-4 rounded-full btn-gold text-lg">Claim My Benefits</button>
                <button id="exit-anyway-btn" class="bg-gray-700 text-white font-bold w-full py-3 px-4 rounded-full hover:bg-gray-600 transition-colors">Exit Anyway</button>
             </div>
        </div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-30 backdrop-blur-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-semibold gold-text font-serif">The Inner Circle</h1>
            <a href="#register" class="px-5 py-2 text-black gold-bg rounded-full font-bold btn-gold">Join Now</a>
        </div>
    </header>

    <main id="home">
        <!-- Section 1: Hero -->
        <section class="hero-bg min-h-screen flex flex-col items-center justify-center text-center p-6 pt-24 md:pt-20">
            <div class="grid md:grid-cols-2 gap-10 max-w-7xl w-full text-left md:text-center mt-auto md:mt-0 items-center justify-center">
                <!-- Left Column -->
                <div class="max-w-2xl mx-auto md:text-left fade-in">
                    <h2 class="text-4xl md:text-6xl lg:text-7xl font-serif font-extrabold text-white leading-tight">
                        Welcome to the <span class="gold-text">Inner Circle</span> — Your Exclusive Gateway to Wealth & Wisdom.
                    </h2>
                    <p class="mt-6 text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">
                        Zuari Finserv investing directly in your family's future. Exclusive to employees.
                    </p>
                </div>

                <!-- Right Column: Enrollment Card -->
                 <div id="register" class="relative bg-gray-900 bg-opacity-50 p-6 rounded-2xl border gold-border shadow-2xl shadow-yellow-500/10 w-full max-w-md mx-auto fade-in self-center" style="transition-delay: 200ms;">
                    <div class="flex justify-center mb-4">
                        <div class="gift-icon-container">
                             <svg class="w-full h-full" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><g><path d="M50 20L65 35L35 35Z" fill="#CFB53B"></path><path d="M30 25L70 25L50 10Z" fill="#CFB53B" opacity="0.8"></path></g><g><path d="M15 35L85 35V85H15V35Z" fill="#E0C95C"></path><path d="M15 85H85L70 95H30L15 85Z" fill="#CFB53B"></path></g><g><path d="M45 20H55V85H45V20Z" fill="#A58A2B"></path><path d="M15 55H85V45H15V55Z" fill="#A58A2B"></path></g><g><path d="M50 10C60 20 50 30 50 30C40 20 50 10 50 10Z" fill="#CFB53B" stroke="#A58A2B" stroke-width="1"></path></g></svg>
                        </div>
                    </div>
                     <div class="grid grid-cols-2 gap-x-6 gap-y-4 text-left mb-4">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">✨</span>
                            <span class="font-semibold text-sm whitespace-nowrap">Double First SIP</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xl">📞</span>
                            <span class="font-semibold text-sm whitespace-nowrap">RM within 24 hrs</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xl">💰</span>
                            <span class="font-semibold text-sm whitespace-nowrap">Zero Fees</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xl">🎓</span>
                            <span class="font-semibold text-sm whitespace-nowrap">Masterclass</span>
                        </div>
                    </div>
                    
                    <hr class="my-4 border-gray-600">

                    <!-- Form Container -->
                    <div id="main-form-container">
                        <h2 class="font-serif text-lg sm:text-xl font-bold text-center text-white mb-4">Membership Registration</h2>
                        
                        <div id="step-container" class="relative min-h-[160px]">
                            <!-- Step 1: Email -->
                            <div id="step1" class="form-step">
                                <div class="mb-2"><label for="email" class="block text-sm font-medium mb-1 text-gray-300 sr-only">Official Email</label><input id="email" type="email" placeholder="you@zuarifinserv.com" class="form-input mt-1 block w-full px-3 py-2.5 text-base" aria-invalid="false" aria-describedby="email-error"><p id="email-error" class="text-red-400 text-xs mt-1 h-4"></p></div>
                                <button id="sendOtpBtn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-2.5 px-4 rounded-full disabled:opacity-50 mt-3 btn-gold text-base"><span class="btn-text">Request Access</span></button>
                            </div>

                            <!-- Step 2: OTP -->
                            <div id="step2" class="form-step">
                                <div class="mb-3"><label class="block text-sm font-medium text-center mb-2 text-gray-300">Enter 6-Digit OTP</label><div id="email-otp-inputs" class="flex justify-center space-x-2"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"><input type="text" maxlength="1" class="otp-input email-otp" style="width: 2.5rem; height: 3rem; font-size: 1.25rem;"></div><p id="emailOtpInfo" class="text-sm text-red-400 text-center h-5 mt-2"></p></div>
                                <button id="verifyOtpBtn" class="gold-bg text-black font-bold w-full flex items-center justify-center py-2.5 px-4 rounded-full disabled:opacity-50 btn-gold text-base"><span class="btn-text">Verify & Join</span></button>
                                <div class="text-center mt-2 text-xs text-gray-400"><button id="resendOtpBtn" class="gold-text hover:underline disabled:opacity-50" disabled>Didn't receive? Resend</button></div>
                            </div>

                            <!-- Step 3: Success -->
                             <div id="success-screen" class="form-step text-center px-4 py-2">
                                <h2 class="font-serif text-2xl font-bold text-white">🎉 Welcome!</h2>
                                <p class="text-gray-300 mt-2 text-sm">You're in the Inner Circle. Here's what's next:</p>
                                <ul class="text-left text-sm space-y-1.5 mt-3 text-gray-400">
                                    <li><span class="text-green-400">✓</span> Welcome kit in your inbox</li>
                                    <li><span class="text-green-400">✓</span> RM call within 24 hours</li>
                                    <li><span class="text-green-400">✓</span> Masterclass invite on the way</li>
                                </ul>
                                <button id="success-close-btn" class="mt-4 text-sm gold-text hover:underline">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Wealth Calculator -->
        <section class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">See Your Future Wealth</h3>
                <div class="max-w-4xl mx-auto mt-12 fade-in" style="transition-delay: 200ms;">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center mb-8">
                        <div>
                            <label for="monthly-sip" class="block text-lg font-medium text-gray-300 mb-2">Monthly SIP</label>
                            <input id="monthly-sip" type="number" placeholder="e.g., 5000" class="calc-input w-full text-center text-xl p-3" value="5000">
                        </div>
                        <div>
                             <label class="block text-lg font-medium text-gray-300 mb-2">Investment Period (Years)</label>
                             <div id="investment-years" class="grid grid-cols-4 gap-2 rounded-lg bg-gray-800 p-1 calc-btn-group">
                                <button class="p-2 rounded-md" data-years="5">5</button>
                                <button class="p-2 rounded-md active" data-years="10">10</button>
                                <button class="p-2 rounded-md" data-years="15">15</button>
                                <button class="p-2 rounded-md" data-years="20">20</button>
                             </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-white mb-6">
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h4 class="text-gray-400 text-sm font-bold uppercase">Your Investment</h4>
                            <p id="your-investment-result" class="text-3xl font-bold mt-2 gold-text">₹0</p>
                        </div>
                        <div class="bg-green-900 bg-opacity-50 border border-green-500 p-6 rounded-lg">
                            <h4 class="text-green-300 text-sm font-bold uppercase">With Company Match</h4>
                            <p id="matched-investment-result" class="text-4xl font-extrabold mt-2 text-green-300">₹0</p>
                        </div>
                        <div class="bg-gray-800 p-6 rounded-lg">
                            <h4 class="text-gray-400 text-sm font-bold uppercase">Company's Gift</h4>
                            <p id="company-gift-result" class="text-3xl font-bold mt-2 gold-text">₹0</p>
                        </div>
                    </div>

                    <div id="wealth-chart" class="w-full h-64 chart-container relative">
                         <div class="chart-tooltip"></div>
                    </div>
                    
                    <p class="mt-4 text-xs text-gray-500">*Projected returns are based on a 12% compounded annual growth rate (CAGR). We match your first 3 SIPs.</p>
                    <a href="#register" class="mt-8 inline-block px-10 py-4 text-lg font-bold text-black gold-bg rounded-full btn-gold">Secure Your Spot</a>
                </div>
            </div>
        </section>

        <!-- Section 3: Benefits -->
        <section class="py-16 md:py-24">
            <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Your Inner Circle Advantages</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mt-12">
                    <div class="card p-8 rounded-xl text-left fade-in" style="transition-delay: 100ms;">
                        <h4 class="font-serif text-2xl font-bold text-white mb-2">Double First 3 SIPs</h4>
                        <p class="text-gray-400 mb-4">We match your first three monthly investments, doubling your growth potential from day one.</p>
                        <p class="font-bold gold-text">Value: Up to ₹1.2L annually</p>
                    </div>
                     <div class="card p-8 rounded-xl text-left fade-in" style="transition-delay: 200ms;">
                        <h4 class="font-serif text-2xl font-bold text-white mb-2">RM within 24 hrs</h4>
                        <p class="text-gray-400 mb-4">A dedicated relationship manager is assigned to you immediately for setup and guidance.</p>
                        <p class="font-bold gold-text">Value: Instant personalized support</p>
                    </div>
                     <div class="card p-8 rounded-xl text-left fade-in" style="transition-delay: 300ms;">
                        <h4 class="font-serif text-2xl font-bold text-white mb-2">Zero Fees</h4>
                        <p class="text-gray-400 mb-4">All company-matched contributions are completely free of any processing or management fees.</p>
                        <p class="font-bold gold-text">Value: Save ₹24K on ₹10L</p>
                    </div>
                     <div class="card p-8 rounded-xl text-left fade-in" style="transition-delay: 400ms;">
                        <h4 class="font-serif text-2xl font-bold text-white mb-2">Exclusive Masterclass</h4>
                        <p class="text-gray-400 mb-4">Get free access to our premium, expert-led courses on advanced investing strategies.</p>
                        <p class="font-bold gold-text">Value: ₹30K premium access</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Journey -->
        <section class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">How It Works</h3>
                <div id="journey-section" class="max-w-4xl mx-auto mt-12 relative fade-in" style="transition-delay: 200ms;">
                    <svg id="journey-svg" class="absolute left-0 w-full h-24 hidden md:block" style="z-index: 0; top: -1rem;">
                        <path id="journey-line-1" stroke="#CFB53B" stroke-width="3" fill="none" />
                        <path id="journey-line-2" stroke="#CFB53B" stroke-width="3" fill="none" />
                        <path id="journey-line-3" stroke="#CFB53B" stroke-width="3" fill="none" />
                    </svg>
                    <div class="relative grid grid-cols-1 md:grid-cols-4 gap-y-8 md:gap-y-0 md:gap-x-8 text-center" style="z-index: 1;">
                        <div class="flex flex-col items-center journey-step">
                            <div class="w-16 h-16 rounded-full gold-bg text-black flex items-center justify-center font-serif text-2xl font-bold">1</div>
                            <h4 class="font-bold text-xl mt-4">Enroll</h4>
                            <p class="text-gray-400">Email + OTP (30 sec)</p>
                        </div>
                         <div class="flex flex-col items-center journey-step">
                            <div class="w-16 h-16 rounded-full gold-bg text-black flex items-center justify-center font-serif text-2xl font-bold">2</div>
                            <h4 class="font-bold text-xl mt-4">Connect</h4>
                            <p class="text-gray-400">RM calls, setup guidance</p>
                        </div>
                         <div class="flex flex-col items-center journey-step">
                            <div class="w-16 h-16 rounded-full gold-bg text-black flex items-center justify-center font-serif text-2xl font-bold">3</div>
                            <h4 class="font-bold text-xl mt-4">Invest</h4>
                            <p class="text-gray-400">Auto-SIP activated</p>
                        </div>
                         <div class="flex flex-col items-center journey-step">
                            <div class="w-16 h-16 rounded-full gold-bg text-black flex items-center justify-center font-serif text-2xl font-bold">4</div>
                            <h4 class="font-bold text-xl mt-4">Grow</h4>
                            <p class="text-gray-400">Watch wealth compound</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Portfolio -->
        <section class="py-16 md:py-24">
            <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Where Your Money Goes</h3>
                 <div class="max-w-4xl mx-auto mt-12 overflow-x-auto fade-in" style="transition-delay: 200ms;">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-700">
                                <th class="p-4 text-gray-400 font-semibold">Fund</th>
                                <th class="p-4 text-gray-400 font-semibold">Category</th>
                                <th class="p-4 text-gray-400 font-semibold">5Y Returns (CAGR)</th>
                                <th class="p-4 text-gray-400 font-semibold">Risk</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-gray-800">
                                <td class="p-4 font-bold">ICICI Pru Bluechip</td>
                                <td class="p-4">Large Cap</td>
                                <td class="p-4 text-green-400 font-bold">14.2%</td>
                                <td class="p-4">Moderate</td>
                            </tr>
                            <tr class="border-b border-gray-800">
                                <td class="p-4 font-bold">Parag Parikh Flexi Cap</td>
                                <td class="p-4">Flexi Cap</td>
                                <td class="p-4 text-green-400 font-bold">16.8%</td>
                                <td class="p-4">Mod-High</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-bold">HDFC Corporate Bond</td>
                                <td class="p-4">Debt</td>
                                <td class="p-4 text-green-400 font-bold">7.4%</td>
                                <td class="p-4">Low</td>
                            </tr>
                        </tbody>
                    </table>
                 </div>
                 <p class="mt-6 text-gray-500 italic">Allocation is customized in your RM consultation.</p>
            </div>
        </section>
        
        <!-- Section 6: Expert Guidance -->
        <section class="py-16 md:py-24 bg-black">
             <div class="container mx-auto px-6 text-center">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Meet Your Lead Advisor</h3>
                 <div class="max-w-3xl mx-auto mt-12 rounded-xl overflow-hidden fade-in" style="transition-delay: 200ms;">
                    <div class="aspect-video video-placeholder">
                        <div class="play-button">
                             <svg class="w-10 h-10 text-black" fill="currentColor" viewBox="0 0 20 20"><path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3.5 1.5l6 4-6 4v-8z"/></svg>
                        </div>
                    </div>
                 </div>
                 <p class="mt-6 text-lg text-gray-300">Our investment philosophy and commitment to your wealth.</p>
            </div>
        </section>

        <!-- Section 7: Goal Calculators -->
        <section class="py-16 md:py-24">
             <div id="goal-calculators" class="container mx-auto px-6 text-center">
                 <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Plan Your Future</h3>
                 <div class="max-w-4xl mx-auto mt-12 fade-in" style="transition-delay: 200ms;">
                    <div class="border-b border-gray-700 mb-6 flex justify-center space-x-4">
                        <button class="tab-btn py-2 px-4 border-b-2 border-transparent text-lg text-gray-400 hover:text-white transition-colors active" data-tab="education">Child's Education</button>
                        <button class="tab-btn py-2 px-4 border-b-2 border-transparent text-lg text-gray-400 hover:text-white transition-colors" data-tab="home">Home Down Payment</button>
                        <button class="tab-btn py-2 px-4 border-b-2 border-transparent text-lg text-gray-400 hover:text-white transition-colors" data-tab="retirement">Retirement</button>
                    </div>
                    
                    <div class="chart-tooltip"></div>
                    
                    <!-- Education Calculator -->
                    <div id="education-calculator" class="tab-content">
                        <div class="grid md:grid-cols-3 gap-4 mb-6">
                            <input id="edu-cost" type="number" placeholder="Today's Cost (e.g., 2000000)" class="calc-input p-3" value="2000000">
                            <input id="edu-child-age" type="number" placeholder="Child's Current Age" class="calc-input p-3" value="5">
                            <input id="edu-college-age" type="number" placeholder="Age at College" class="calc-input p-3" value="18">
                        </div>
                        <button id="calculate-edu" class="gold-bg text-black font-bold py-2 px-6 rounded-full btn-gold mb-6">Calculate SIP</button>
                        <div id="edu-result" class="text-2xl font-bold text-white h-8"></div>
                        <div id="edu-chart" class="w-full h-64 mt-4 chart-container"></div>
                    </div>
                    
                    <!-- Home Calculator -->
                    <div id="home-calculator" class="tab-content hidden">
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <input id="home-goal" type="number" placeholder="Target Down Payment" class="calc-input p-3" value="2500000">
                            <input id="home-years" type="number" placeholder="Years to Save" class="calc-input p-3" value="7">
                        </div>
                        <button id="calculate-home" class="gold-bg text-black font-bold py-2 px-6 rounded-full btn-gold mb-6">Calculate SIP</button>
                        <div id="home-result" class="text-2xl font-bold text-white h-8"></div>
                        <div id="home-chart" class="w-full h-64 mt-4 chart-container"></div>
                    </div>
                    
                    <!-- Retirement Calculator -->
                    <div id="retirement-calculator" class="tab-content hidden">
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                             <input id="ret-current-age" type="number" placeholder="Your Current Age" class="calc-input p-3" value="30">
                             <input id="ret-age" type="number" placeholder="Retirement Age" class="calc-input p-3" value="60">
                             <input id="ret-monthly-expense" type="number" placeholder="Desired Monthly Expense" class="calc-input p-3" value="75000">
                             <input id="ret-life-expectancy" type="number" placeholder="Life Expectancy" class="calc-input p-3" value="85">
                        </div>
                         <button id="calculate-ret" class="gold-bg text-black font-bold py-2 px-6 rounded-full btn-gold mb-6">Calculate SIP</button>
                        <div id="ret-result" class="text-2xl font-bold text-white h-8"></div>
                        <div id="ret-chart" class="w-full h-64 mt-4 chart-container"></div>
                    </div>
                 </div>
            </div>
        </section>

        <!-- Section 8: Our Why -->
        <section class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6 text-center">
                <div class="max-w-3xl mx-auto fade-in">
                    <h3 class="font-serif text-3xl md:text-5xl font-bold text-white">You're Family</h3>
                    <div class="mt-8 p-8 bg-gray-900 rounded-xl border-l-4 gold-border">
                        <p class="font-serif text-2xl gold-text italic leading-relaxed">"At Zuari Finserv, employee prosperity is our prosperity. Inner Circle is our commitment—we invest our money in your future because family takes care of family."</p>
                        <p class="mt-6 font-bold text-gray-400">— Leadership Team</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Section 9: FAQ -->
        <section class="py-16 md:py-24">
            <div class="container mx-auto px-6 max-w-3xl">
                <h3 class="font-serif text-3xl md:text-5xl font-bold text-white text-center mb-12 fade-in">Frequently Asked Questions</h3>
                <div id="faq-accordion" class="space-y-4 fade-in" style="transition-delay: 200ms;">
                    <!-- FAQ items will be inserted by JS -->
                </div>
            </div>
        </section>

        <!-- Section 10: Comparison -->
        <section class="py-16 md:py-24 bg-black">
            <div class="container mx-auto px-6 text-center">
                 <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Inner Circle vs. DIY</h3>
                 <div class="max-w-4xl mx-auto mt-12 grid md:grid-cols-2 gap-8 text-left fade-in" style="transition-delay: 200ms;">
                    <div class="card p-8 rounded-lg">
                        <h4 class="font-serif text-3xl font-bold mb-6">Alone</h4>
                        <ul class="space-y-4 text-lg">
                            <li class="flex justify-between"><span>Monthly Investment:</span> <span class="font-bold">₹5K</span></li>
                            <li class="flex justify-between"><span>10Y Wealth:</span> <span class="font-bold">₹11.8L</span></li>
                            <li class="flex justify-between"><span>Advisory:</span> <span class="font-bold">₹3-5K/month</span></li>
                            <li class="flex justify-between"><span>Support:</span> <span class="font-bold">None</span></li>
                        </ul>
                    </div>
                    <div class="card p-8 rounded-lg border-2 gold-border shadow-2xl shadow-yellow-500/10">
                        <h4 class="font-serif text-3xl font-bold mb-6 gold-text">Inner Circle</h4>
                         <ul class="space-y-4 text-lg">
                            <li class="flex justify-between"><span>Monthly Investment:</span> <span class="font-bold text-green-400">₹10K (matched)</span></li>
                            <li class="flex justify-between"><span>10Y Wealth:</span> <span class="font-bold text-green-400">₹23.6L</span></li>
                            <li class="flex justify-between"><span>Advisory:</span> <span class="font-bold text-green-400">Free</span></li>
                            <li class="flex justify-between"><span>Support:</span> <span class="font-bold text-green-400">Dedicated RM</span></li>
                        </ul>
                    </div>
                 </div>
            </div>
        </section>
        
        <!-- Section 11: Coming Soon -->
        <section class="py-16 md:py-24">
             <div class="container mx-auto px-6 text-center">
                 <h3 class="font-serif text-3xl md:text-5xl font-bold text-white fade-in">Inner Circle Masterclass Series</h3>
                 <p class="mt-4 text-lg text-yellow-300 font-semibold fade-in">🔜 Launching Soon</p>
                 <div class="max-w-3xl mx-auto mt-8 grid sm:grid-cols-2 gap-4 text-left fade-in" style="transition-delay: 200ms;">
                    <div class="bg-gray-800 p-4 rounded-lg">SIP strategies for maximum growth</div>
                    <div class="bg-gray-800 p-4 rounded-lg">Tax-optimized wealth building</div>
                    <div class="bg-gray-800 p-4 rounded-lg">Portfolio rebalancing mastery</div>
                    <div class="bg-gray-800 p-4 rounded-lg">Retirement planning fundamentals</div>
                 </div>
                 <div class="mt-8 max-w-md mx-auto fade-in" style="transition-delay: 400ms;">
                    <a href="#register" id="notify-form" class="gold-bg text-black font-bold py-3 px-6 rounded-full btn-gold inline-block">Notify Me</a>
                 </div>
            </div>
        </section>
        
    </main>

    <footer class="bg-black py-8 border-t border-gray-800">
        <div class="container mx-auto px-6 text-center text-gray-500">
             <div class="flex justify-center space-x-6 mb-4">
                <a href="#faq-accordion" class="hover:text-gold-text transition-colors">FAQ</a>
                <a href="#portfolio" class="hover:text-gold-text transition-colors">Fund Details</a>
             </div>
             <p>Contact: <a href="mailto:innercircle@zuarifinserv.com" class="hover:text-gold-text transition-colors">innercircle@zuarifinserv.com</a></p>
            <p class="text-sm mt-4">Mutual funds are subject to market risks. Read all scheme related documents carefully before investing.</p>
             <p class="text-sm mt-2">&copy; 2025 The Inner Circle. All Rights Reserved.</p>
        </div>
    </footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
    // --- GLOBAL SETTINGS ---
    const API_BASE_URL = 'http://localhost:3000';
    let formSubmitted = false;
    
    // --- UTILITY FUNCTIONS ---
    const formatCurrency = (num) => {
        if (num >= 10000000) return `₹${(num / 10000000).toFixed(1)} Cr`;
        if (num >= 100000) return `₹${(num / 100000).toFixed(1)} L`;
        if (num >= 1000) return `₹${(num / 1000).toFixed(0)}K`;
        return `₹${num.toFixed(0)}`;
    };

    function showToast(message, isError = false) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.className = `fixed top-5 left-1/2 -translate-x-1/2 py-3 px-6 rounded-lg shadow-xl z-[9999] transition-transform duration-500 ${isError ? 'bg-red-600 text-white' : 'bg-gray-800 text-white'}`;
        toast.style.transform = 'translate(-50%, 0)';
        setTimeout(() => {
            toast.style.transform = 'translate(-50%, -150%)';
        }, 3000);
    }

    // --- SMOOTH SCROLL & FADE-IN ANIMATIONS ---
    function setupPageAnimations() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetElement = document.querySelector(this.getAttribute('href'));
                if(targetElement) targetElement.scrollIntoView({ behavior: 'smooth' });
            });
        });

        const faders = document.querySelectorAll('.fade-in');
        const appearOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
        const appearOnScroll = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting) return;
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            });
        }, appearOptions);
        faders.forEach(fader => appearOnScroll.observe(fader));
    }

    // --- HERO FORM LOGIC ---
    function setupHeroForm() {
        const sendOtpBtn = document.getElementById('sendOtpBtn');
        const verifyOtpBtn = document.getElementById('verifyOtpBtn');
        const emailInput = document.getElementById('email');
        const successCloseBtn = document.getElementById('success-close-btn');
        
        const showStep = (stepId) => {
            document.querySelectorAll('#main-form-container .form-step').forEach(s => s.classList.remove('active'));
            document.getElementById(stepId).classList.add('active');
        }

        sendOtpBtn.addEventListener('click', () => {
            const emailValue = emailInput.value.trim();
            if (emailValue === '') {
                showToast('Please enter your email.', true);
                emailInput.classList.add('shake');
                setTimeout(() => {
                    emailInput.classList.remove('shake');
                }, 820);
                return;
            }
             if (/^[^\s@]+@adventz\.com$/.test(emailValue)) {
                showToast('OTP sent to your email.');
                showStep('step2');
             } else {
                showToast('Enter email in this format you@adventz.com', true);
                emailInput.classList.add('shake');
                setTimeout(() => {
                    emailInput.classList.remove('shake');
                }, 820);
             }
        });

        verifyOtpBtn.addEventListener('click', () => {
            showToast('Verification successful!');
            showStep('success-screen');
            formSubmitted = true;
        });
        
        successCloseBtn.addEventListener('click', () => {
            showStep('step1');
            emailInput.value = '';
        });

        showStep('step1');
    }

    // --- WEALTH CALCULATOR LOGIC & CHART ---
    function setupWealthCalculator() {
        const sipInput = document.getElementById('monthly-sip');
        const yearsButtons = document.querySelectorAll('#investment-years button');
        const yourResult = document.getElementById('your-investment-result');
        const matchedResult = document.getElementById('matched-investment-result');
        const giftResult = document.getElementById('company-gift-result');
        const chartContainerId = 'wealth-chart';
        
        let monthlySip = 5000;
        let years = 10;
        const annualRate = 0.12;

        const updateCalculator = () => {
            const monthlyRate = annualRate / 12;
            const totalMonths = years * 12;
            let userCorpus = 0;
            let companyCorpus = 0;
            const chartData = [];

            for (let month = 1; month <= totalMonths; month++) {
                userCorpus *= (1 + monthlyRate);
                companyCorpus *= (1 + monthlyRate);
                userCorpus += monthlySip;
                if (month <= 3) {
                    companyCorpus += monthlySip;
                }
                const totalCorpus = userCorpus + companyCorpus;
                const volatilityFactor = 1 + (Math.random() - 0.5) * 0.05;
                chartData.push({ month: month, value: totalCorpus * volatilityFactor });
            }
            
            yourResult.textContent = formatCurrency(userCorpus);
            matchedResult.textContent = formatCurrency(userCorpus + companyCorpus);
            giftResult.textContent = formatCurrency(companyCorpus);

            drawWealthChart(chartContainerId, chartData, years);
        };

        sipInput.addEventListener('input', () => {
            monthlySip = parseFloat(sipInput.value) || 0;
            updateCalculator();
        });

        yearsButtons.forEach(button => {
            button.addEventListener('click', () => {
                yearsButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                years = parseInt(button.dataset.years);
                updateCalculator();
            });
        });
        
        updateCalculator();
    }

    function drawWealthChart(containerId, data, totalYears) {
        const container = d3.select(`#${containerId}`);
        container.selectAll("svg").remove();

        const tooltip = container.select(".chart-tooltip");
        
        const margin = {top: 20, right: 20, bottom: 30, left: 60};
        const width = container.node().getBoundingClientRect().width - margin.left - margin.right;
        const height = 256 - margin.top - margin.bottom;

        const svg = container.append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3.scaleLinear().domain([0, totalYears]).range([0, width]);
        svg.append("g").attr("transform", `translate(0,${height})`).call(d3.axisBottom(x).ticks(Math.min(totalYears, 10)).tickFormat(d => d > 0 ? `${d}y` : '0'));

        const y = d3.scaleLinear().domain([0, d3.max(data, d => d.value) * 1.05]).range([height, 0]);
        svg.append("g").call(d3.axisLeft(y).ticks(5).tickFormat(d => formatCurrency(d).replace('₹','')));
        
        const line = d3.line().x(d => x(d.month / 12)).y(d => y(d.value));
        const path = svg.append("path").datum(data).attr("fill", "none").attr("stroke", "#CFB53B").attr("stroke-width", 2).attr("d", line);

        const pathLength = path.node().getTotalLength();
        path.attr("stroke-dasharray", pathLength).attr("stroke-dashoffset", pathLength).transition().duration(2000).attr("stroke-dashoffset", 0);

        const hoverElements = svg.append("g").style("display", "none");
        const hoverLine = hoverElements.append("line").attr("class", "hover-line").attr("y1", 0).attr("y2", height);
        const hoverCircle = hoverElements.append("circle").attr("class", "hover-circle").attr("r", 4);
        
        svg.append("rect")
            .attr("width", width).attr("height", height).attr("fill", "none").attr("pointer-events", "all")
            .on("mouseover", () => { hoverElements.style("display", null); tooltip.style("opacity", 1); })
            .on("mouseout", () => { hoverElements.style("display", "none"); tooltip.style("opacity", 0); })
            .on("mousemove", (event) => {
                const [mx] = d3.pointer(event);
                const year = x.invert(mx);
                const month = Math.round(year * 12);
                const bisect = d3.bisector(d => d.month).left;
                const index = bisect(data, month, 1);
                const d = data[index - 1] || data[0];

                if(d){
                    hoverLine.attr("x1", x(d.month/12)).attr("x2", x(d.month/12));
                    hoverCircle.attr("cx", x(d.month/12)).attr("cy", y(d.value));

                    tooltip.html(`Year: ${(d.month/12).toFixed(1)}<br>Wealth: ${formatCurrency(d.value)}`)
                        .style("left", (event.pageX + 15) + "px")
                        .style("top", (event.pageY - 28) + "px");
                }
            });
    }
    
    // --- D3 GOAL CHART DRAWING FUNCTION ---
    function drawGoalChart(containerId, data) {
        const container = d3.select(`#${containerId}`);
        container.selectAll("*").remove(); 

        const tooltip = d3.select(`#goal-calculators .chart-tooltip`);
        
        const margin = {top: 40, right: 20, bottom: 30, left: 60};
        const width = container.node().getBoundingClientRect().width - margin.left - margin.right;
        const height = 256 - margin.top - margin.bottom;

        const svg = container.append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);
        
        const x = d3.scaleBand()
            .range([0, width])
            .domain(data.map(d => d.year))
            .padding(0.4);
            
        svg.append("g")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(x).tickValues(x.domain().filter((d,i) => !((i+1)%Math.ceil(data.length/5)) || i === 0 || i === data.length -1 )));

        const y = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.value) * 1.3])
            .range([height, 0]);
            
        svg.append("g")
           .call(d3.axisLeft(y).ticks(5).tickFormat(d => formatCurrency(d).replace('₹','')));

        const bars = svg.selectAll("mybar")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", d => x(d.year))
            .attr("y", height)
            .attr("width", x.bandwidth())
            .attr("height", 0)
            .attr("fill", "#CFB53B")
            .on("mouseover", function(event, d) {
                d3.select(this).attr("fill", "#E0C95C");
                tooltip.style("opacity", 1);
            })
            .on("mousemove", (event, d) => {
                tooltip.html(`Year: ${d.year}<br>Corpus: ${formatCurrency(d.value)}`)
                    .style("left", (event.pageX + 15) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                d3.select(this).attr("fill", "#CFB53B");
                tooltip.style("opacity", 0);
            });
            
        const barTransition = bars.transition()
            .duration(800)
            .attr("y", d => y(d.value))
            .attr("height", d => height - y(d.value))
            .delay((d,i) => i*20);
        
        barTransition.end().then(() => {
            if (data.length < 2) return;

            const lastBar = data[data.length - 1];
            const startX = x(data[0].year);
            const startY = height;
            const endX = x(lastBar.year) + x.bandwidth();
            const endY = 0;

            const pathData = `M ${startX},${startY} L ${endX},${endY}`;

            const arrowPath = svg.append("path")
                .attr("d", pathData)
                .attr("fill", "none")
                .attr("stroke", "#CFB53B")
                .attr("stroke-width", 8)
                .attr("stroke-linecap", "round");
            
            const arrowhead = svg.append("path")
                .attr("d", "M -12 -10 L 15 0 L -12 10 Z")
                .attr("fill", "#CFB53B");

            const length = arrowPath.node().getTotalLength();
            arrowPath.attr("stroke-dasharray", length)
                .attr("stroke-dashoffset", length)
                .transition()
                .duration(2000)
                .ease(d3.easeCubicInOut)
                .attr("stroke-dashoffset", 0);

            const p1 = arrowPath.node().getPointAtLength(0);
            const p2 = arrowPath.node().getPointAtLength(length);
            const angle = Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;

            arrowhead.attr("transform", `translate(${p1.x},${p1.y}) rotate(${angle})`)
                .transition()
                .duration(2000)
                .ease(d3.easeCubicInOut)
                .attrTween("transform", () => {
                    return t => {
                        const p = arrowPath.node().getPointAtLength(t * length);
                        return `translate(${p.x},${p.y}) rotate(${angle})`;
                    };
                });
        });
    }

    // --- GOAL CALCULATORS LOGIC ---
    function setupGoalCalculators() {
        const tabs = document.querySelectorAll('.tab-btn');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                contents.forEach(c => c.classList.add('hidden'));
                const activeTabContent = document.getElementById(`${tab.dataset.tab}-calculator`);
                activeTabContent.classList.remove('hidden');
                activeTabContent.querySelector('button').click();
            });
        });

        const inflationRate = 0.06;
        const returnRate = 0.12;

        document.getElementById('calculate-edu').addEventListener('click', () => {
            const cost = parseFloat(document.getElementById('edu-cost').value);
            const childAge = parseInt(document.getElementById('edu-child-age').value);
            const collegeAge = parseInt(document.getElementById('edu-college-age').value);
            if (!cost || !childAge || !collegeAge || collegeAge <= childAge) {
                document.getElementById('edu-result').textContent = "Please enter valid details.";
                drawGoalChart('edu-chart', []);
                return;
            }
            const years = collegeAge - childAge;
            const futureCost = cost * Math.pow(1 + inflationRate, years);
            const i = returnRate / 12;
            const n = years * 12;
            const sip = futureCost / ((((Math.pow(1 + i, n) - 1) / i) * (1 + i)));
            document.getElementById('edu-result').textContent = `Monthly SIP needed: ${formatCurrency(sip)}`;
            
            const chartData = [];
            for (let yr = 1; yr <= years; yr++) {
                chartData.push({ year: childAge + yr, value: sip * ((((Math.pow(1 + i, yr * 12) - 1) / i) * (1 + i))) });
            }
            drawGoalChart('edu-chart', chartData);
        });
        
        document.getElementById('calculate-home').addEventListener('click', () => {
            const goal = parseFloat(document.getElementById('home-goal').value);
            const years = parseInt(document.getElementById('home-years').value);
            if (!goal || !years) {
                document.getElementById('home-result').textContent = "Please enter valid details.";
                drawGoalChart('home-chart', []);
                return;
            }
            const i = returnRate / 12;
            const n = years * 12;
            const sip = goal / ((((Math.pow(1 + i, n) - 1) / i) * (1 + i)));
            document.getElementById('home-result').textContent = `Monthly SIP needed: ${formatCurrency(sip)}`;
            
            const chartData = [];
            for (let yr = 1; yr <= years; yr++) {
                chartData.push({ year: yr, value: sip * ((((Math.pow(1 + i, yr * 12) - 1) / i) * (1 + i))) });
            }
            drawGoalChart('home-chart', chartData);
        });

        document.getElementById('calculate-ret').addEventListener('click', () => {
            const currentAge = parseInt(document.getElementById('ret-current-age').value);
            const retAge = parseInt(document.getElementById('ret-age').value);
            const monthlyExpense = parseFloat(document.getElementById('ret-monthly-expense').value);
            const lifeExpectancy = parseInt(document.getElementById('ret-life-expectancy').value);
             if (!currentAge || !retAge || !monthlyExpense || !lifeExpectancy || retAge <= currentAge) {
                document.getElementById('ret-result').textContent = "Please enter valid details.";
                drawGoalChart('ret-chart', []);
                return;
            }
            
            const yearsToRetire = retAge - currentAge;
            const futureMonthlyExpense = monthlyExpense * Math.pow(1 + inflationRate, yearsToRetire);
            const yearsInRetirement = lifeExpectancy - retAge;
            const corpusNeeded = (futureMonthlyExpense * 12 * yearsInRetirement) * 0.7; // Simplified

            const i = returnRate / 12;
            const n = yearsToRetire * 12;
            const sip = corpusNeeded / ((((Math.pow(1 + i, n) - 1) / i) * (1 + i)));
            document.getElementById('ret-result').textContent = `Monthly SIP needed: ${formatCurrency(sip)}`;
            
            const chartData = [];
            for (let yr = 1; yr <= yearsToRetire; yr++) {
                chartData.push({ year: currentAge + yr, value: sip * ((((Math.pow(1 + i, yr * 12) - 1) / i) * (1 + i))) });
            }
            drawGoalChart('ret-chart', chartData);
        });
    }

    // --- FAQ ACCORDION LOGIC ---
    function setupFaq() {
        const faqData = [
            { q: "What if I leave the company?", a: "Your contributions are 100% yours. Company matching vests over time: 25% after Year 1, 50% after Year 2, and 100% after Year 3." },
            { q: "I've never invested—is it risky?", a: "Your RM creates a balanced portfolio based on your personal risk tolerance. You can start small to grow your confidence." },
            { q: "Can I pause my contributions?", a: "Yes. We offer flexible pause options to accommodate major life events and emergencies." },
            { q: "How is this different from a PF?", a: "PF offers ~8% fixed returns for retirement. SIPs average 12-15% with market growth. Our matching is immediate, not locked until retirement." },
            { q: "Is my money safe?", a: "Absolutely. All funds are held with SEBI-regulated fund houses directly in your name, ensuring full regulatory protection." },
            { q: "What about a market crash?", a: "SIPs are designed for long-term growth. They automatically buy more units when prices are low, which historically benefits investors over 10+ year horizons." },
            { q: "How do I access my funds?", a: "You can redeem your funds after a 1-year lock-in period. The money will be in your bank account within 3-4 business days." },
            { q: "What are the tax implications?", a: "Equity gains up to ₹1.25L per year are tax-free, with a 12.5% tax on gains beyond that. This is generally more tax-efficient than FDs." }
        ];

        const accordion = document.getElementById('faq-accordion');
        if (!accordion) return;
        accordion.innerHTML = faqData.map(item => `
            <div class="accordion-item bg-gray-800 rounded-lg border border-gray-700">
                <button class="accordion-button w-full p-5 flex justify-between items-center text-white font-semibold text-left focus:outline-none">
                    <span>${item.q}</span>
                    <svg class="w-5 h-5 transform transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content border-t border-gray-700 text-gray-400">
                    <p class="p-5">${item.a}</p>
                </div>
            </div>
        `).join('');

        accordion.addEventListener('click', (e) => {
            const button = e.target.closest('.accordion-button');
            if (button) {
                const item = button.parentElement;
                const content = button.nextElementSibling;
                const isOpen = item.classList.toggle('open');
                content.style.maxHeight = isOpen ? content.scrollHeight + "px" : null;
            }
        });
    }

    // --- JOURNEY LINE ANIMATION ---
    function setupJourneyAnimation() {
        const section = document.getElementById('journey-section');
        if (!section) return;

        const observer = new IntersectionObserver((entries) => {
            if (entries[0].isIntersecting) {
                requestAnimationFrame(() => {
                    const steps = Array.from(section.querySelectorAll('.journey-step'));
                    const svg = document.getElementById('journey-svg');
                    const paths = [
                        document.getElementById('journey-line-1'),
                        document.getElementById('journey-line-2'),
                        document.getElementById('journey-line-3')
                    ];
                    
                    if (steps.length < 4 || !svg || paths.some(p => !p)) return;

                    const svgRect = svg.getBoundingClientRect();
                    const points = steps.map(step => {
                        const icon = step.querySelector('.w-16');
                        const rect = icon.getBoundingClientRect();
                        return {
                            x: rect.left - svgRect.left + rect.width / 2,
                            y: rect.top - svgRect.top + rect.height / 2
                        };
                    });

                    if (points.some(p => isNaN(p.x) || isNaN(p.y))) return;

                    for (let i = 0; i < paths.length; i++) {
                        const path = paths[i];
                        const p1 = points[i];
                        const p2 = points[i+1];
                        
                        const rx = (p2.x - p1.x) / 2;
                        const ry = 30; // Arc height

                        const d = `M ${p1.x} ${p1.y} A ${rx} ${ry} 0 0 0 ${p2.x} ${p2.y}`;
                        path.setAttribute('d', d);

                        const length = path.getTotalLength();
                        path.style.strokeDasharray = length;
                        path.style.strokeDashoffset = length;
                    }
                    
                    section.classList.add('is-visible');
                });
                observer.unobserve(section);
            }
        }, { threshold: 0.7 });

        observer.observe(section);
    }


    // --- EXIT INTENT POPUP LOGIC ---
    function setupExitIntent() {
        const modal = document.getElementById('exit-intent-modal');
        let hasShown = false;
        
        document.body.addEventListener('mouseout', (e) => {
            if (!e.toElement && !e.relatedTarget && e.clientY < 10 && !formSubmitted && !hasShown) {
                hasShown = true;
                modal.classList.add('open');
            }
        });
        
        document.getElementById('claim-benefits-btn').addEventListener('click', () => {
            modal.classList.remove('open');
            document.getElementById('register').scrollIntoView({ behavior: 'smooth' });
        });

        document.getElementById('exit-anyway-btn').addEventListener('click', () => {
            modal.classList.remove('open');
        });
    }

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        setupPageAnimations();
        setupHeroForm();
        setupWealthCalculator();
        setupGoalCalculators();
        setupFaq();
        setupJourneyAnimation();
        setupExitIntent();
        
        // Trigger initial calculation for the first goal calculator
        document.getElementById('calculate-edu').click();
        
        document.getElementById('notify-form').addEventListener('click', (e) => {
            const href = e.currentTarget.getAttribute('href');
            if (href && href.startsWith('#')) {
                e.preventDefault();
                document.querySelector(href).scrollIntoView({ behavior: 'smooth' });
            }
        });
    });

</script>
</body>
</html>

